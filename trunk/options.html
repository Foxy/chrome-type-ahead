<html>
  <head>
    <title>Type-ahead-find options</title>
    <script type="text/javascript">
      function feedback() {
        var status = document.getElementById("status");
        status.innerHTML = "<i>Options saved</i>";
        setTimeout(function() {
          status.innerHTML = "";
        }, 750);
      }
      
      function set_blacklist_state() {
        var blacklist = document.getElementById('sites_blacklist')
        if (document.getElementById("direct_search_mode").value != 'disabled')
          blacklist.removeAttribute('disabled');
        else
          blacklist.setAttribute('disabled', 'disabled');
      }
      
      function save_options() {
        function save_boolean(name) {
          var checkbox = document.getElementById(name);
          localStorage[name] = checkbox.checked ? '1': '0';
        }
        function save_string(name) {
          var field = document.getElementById(name);
          localStorage[name] = field.value || '';
        }
        save_string("direct_search_mode");
        save_boolean("case_sensitive");
        save_boolean("search_in_selects");
        save_boolean("starts_link_only");
        save_string("sites_blacklist");                 
        feedback();
      }

      function restore_options() {
        function restore_boolean(name) {
          var checkbox = document.getElementById(name);
          checkbox.checked = localStorage[name] == '1';
        }
        function restore_string(name) {
          var field = document.getElementById(name);
          field.value = localStorage[name] || '';
        }
        restore_string("direct_search_mode");
        restore_boolean("case_sensitive");
        restore_boolean("search_in_selects");
        restore_boolean("starts_link_only");
        restore_string("sites_blacklist");
        set_blacklist_state();
      }
    </script>
  </head>
    
  <body onload="restore_options()">
    <h2>Options</h2>
        
    <div id="options">
      <label for="direct_search_mode">
        <select id="direct_search_mode" onchange="set_blacklist_state()">
          <option value="text">Text</option>
          <option value="links">Links</option>
          <option value="disabled">Disabled</option>
        </select>
        Direct search state
      </label>
      <br />
      <label for="case_sensitive"> 
        <input id="case_sensitive" type="checkbox" value="1" />
        Search case-sensitive strings
      </label>
      <br />
      <label for="search_in_selects"> 
        <input id="search_in_selects" type="checkbox" value="1" />
        Search text inside select options
      </label>
      <br />
      <label for="starts_link_only"> 
        <input id="starts_link_only" type="checkbox" value="1" />
        Search only start of text when searching links
      </label>
      <h3>Blacklisted sites</h3>
      <label for="sites_blacklist"> 
        Add URLs for sites for which direct search will be disabled (you'll need to use either <strong>/</strong> or <strong>'</strong> instead).
        <br />Example: <i>http://mail.google.com/*</i>
      </label>
      <br />
      <textarea id="sites_blacklist" cols="60" rows="10"></textarea>
      <br />
      <br />
      <button onclick="save_options()">Save</button>
      &nbsp;<span id="status"></span>
    </div>
   
    <h2>How to use this extension</h2>
    <div id="info">
      <ul>
        <li>Write directly or press <strong>/</strong> to start the primary search (by default, this mode matches all texts).</li>
        <li>Press <strong>'</strong> to start the secondary search (by default, this mode matches only text links).</li>
        <li>Use <i>F3</i> or <i>Control+G</i> or <i>Alt+N/P</i> to switch between matches.</li>        
        <li>Use <i>F4</i> to toggle matching mode (text/links) once the search has started.</li>
      </ul>               
    </div>
    
    Check the <a href="http://code.google.com/p/chrome-type-ahead/">Chrome-ahead-find website</a> for more information about this extension.    
  </body>
</html>
